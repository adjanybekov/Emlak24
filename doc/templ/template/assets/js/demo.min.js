"use strict";!function(e){function o(o){var n=e(o);n.length&&n.parsley().on("form:success",function(e){return app.notifier.showSuccess("You have been successfully subscribed!"),!1}).on("form:error",function(e){return app.notifier.showError("Subscription failed! Please try again."),!1})}function n(o){var n=e(o);if(n.length){n.find(":submit");n.parsley()}}function a(o){var n=e(o);if(n.length){app.createPhotoSwipe(o,{})}}function t(o){var n=e(o),a=e(".widget select");n.length&&n.select2({width:"100%"}),a.length&&a.select2({width:"100%"})}function i(o){var n=e(o);n.length&&n.find(".js-slick-slider").slick({dots:!1,infinite:!0,speed:300,slidesToShow:5,autoplay:!0,accessibility:!1,prevArrow:n.find(".js-partners-prev"),nextArrow:n.find(".js-partners-next"),responsive:[{breakpoint:1100,settings:{slidesToShow:4}},{breakpoint:1e3,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:1}}]})}function s(o){var n=e(o);n.length&&plyr.setup()}function r(o){var n=e(o);n.length&&n.find(".js-slick-slider").slick({dots:!0,infinite:!0,speed:800,slidesToShow:1,autoplay:!0,autoplaySpeed:5e3})}function l(o){function n(){l||"lg"===app.gridSize.get()&&requestAnimationFrame(function(){s.hasClass("navbar--overlay")&&(i.addClass("header--white"),s.addClass("navbar--overlay-map")),r.addClass("opened"),t.addClass("form--white"),l=!0})}var a=e(o);if(a.length){var t=a.find(".js-search-form"),i=e(".header"),s=e("#header-nav"),r=a.find(".map");a.addClass("banner--play"),t.on("formChange",_.throttle(n,500)),c(o),b(".js-map-index-canvas");var l=!1}}function c(o){if(e("#banner-line").length){var n=e(o),a=n.find(".js-search-form");new app.Vivus("banner-line",{type:"async",start:"autostart",ignoreInvisible:!1,duration:50},function(){var o=e("#banner-line").closest(".slider__item");o.hasClass("slick-slide")&&!o.hasClass("slick-active")||(n.find(".js-arrow-end").css({opacity:1}),a.addClass("form--anim"))})}}function p(o){var n=e(o);if(n.length){var a=n.find(".js-slick-slider");a.slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,lazyLoad:"progressive",prevArrow:n.find(".js-banner-prev"),nextArrow:n.find(".js-banner-next"),responsive:[{breakpoint:1300,settings:{centerMode:!1,variableWidth:!1,arrows:!0}}]}),a.on("setPosition",function(e,o){n.addClass("slider--init")})}}function d(o){if("xs"!==app.gridSize.get()){var n=e(o),a=n.find(".js-slick-slider");a.slick({dots:!0,infinite:!0,autoplay:!0,autoplaySpeed:3e3,speed:600,slidesToShow:1,lazyLoad:"progressive",accessibility:!1,arrows:!1,focusOnSelect:!1})}}function f(o){var n=e(o);if(n.length){var a,t;n.each(function(){var o=e(this),n=o.find(".js-slick-slider"),i=o.siblings(".slider");a=i.find(".js-slick-slider"),n.slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,centerMode:!1,arrows:!1,accessibility:!1,fade:!0}),t=a.html(),a.slick({slidesToShow:5,slidesToScroll:1,focusOnSelect:!0,arrows:!0,accessibility:!1,centerMode:!0,centerPadding:0,prevArrow:i.find(".js-slick-prev"),nextArrow:i.find(".js-slick-next"),responsive:[{breakpoint:768,settings:{slidesToShow:3}}]});var s,r=e(".js-slider-category");r.on("click",function(){r.removeClass("active"),e(this).addClass("active");var o,i=e(this).data("filter");a.slick("slickRemove",!0,!0,!0),o="all"===i?t:e(t).filter(".slider__item--"+i),a.slick("slickAdd",o),s=a.find(".slick-current").data("slide-rel"),n.slick("slickGoTo",s,!1)}),a.on("afterChange",function(e,o,t,i){s=a.find(".slick-current").data("slide-rel"),n.slick("slickGoTo",s,!1)}).on("click",".slider__item",function(){var o=e(this);s=e(o).data("slide-rel"),n.slick("slickGoTo",s,!1)})})}}function g(o){function n(){a.trigger("formChange")}var a=e(o),t=a.find(".js-select-checkboxes"),i=a.find(".js-select-checkboxes"),s=a.find(".js-search-range"),r=a.find('input[type="text"]'),l=a.find("textarea"),c=a.find("select"),p=a.find('input[type="checkbox"]');t.each(function(){var o=e(this),n=e(this).prev(".js-select-checkboxes-btn"),a=n.data("placeholder");o.find(".in-checkbox").change(function(){var o,t,i=[];o=e(this).closest(".js-select-checkboxes"),e(o).find(".in-checkbox:checked").each(function(){var o=e(this).next("label").text();i.push(o)}),t=i.join(", ")||a,e(n).text(t)})}),e(".js-select-checkboxes-reset").on("click",function(){var o=e(this),n=o.closest(".js-select-checkboxes");n.find('input[type="checkbox"]').prop({checked:!1,indeterminate:!1}),n.find('input[type="checkbox"]').first().trigger("change")}),e(".js-select-checkboxes-accept").on("click",function(){var o=e(this),n=o.closest(".js-select-checkboxes");n.closest(".dropdown").removeClass("open")}),e(".js-form-reset").on("click",function(){r.val(""),l.text(""),c.each(function(o,n){e(n).find("option").removeAttr("selected"),e(n).trigger("change")}),p.prop({checked:!1,indeterminate:!1}),i.each(function(o,n){e(n).find('input[type="checkbox"]').first().trigger("change")}),s.each(function(o,n){var a=e(n).data("ionRangeSlider");a.reset()})}),e("body").on("click",".js-dropdown-menu",function(e){e.stopPropagation()});var d=e(".js-checkboxes-tree");d.length&&(d.bonsai(),d.qubit());var f=_.debounce(n,500);s.on("change",f),r.on("input",n),l.on("change",n),c.on("change",n),p.on("change",n)}function m(){var o=e("#range_area"),n=e("#range_price"),a=e("#range_commision"),t=e("#range_room"),i=e("#range_ui");o.length&&o.ionRangeSlider({type:"double",min:0,max:2e3,hide_min_max:!0,hide_from_to:!1,grid:!1,postfix:" sq ft",force_edges:!0,step:10,max_postfix:"+",onFinish:app.rangeInputInteraction}),n.length&&n.ionRangeSlider({type:"double",min:0,max:5e6,hide_min_max:!0,hide_from_to:!1,grid:!1,prefix:"$",force_edges:!0,max_postfix:"+",step:1e3,prettify:function(e){return app.utils.abbreviateNumber(e)},onFinish:app.rangeInputInteraction}),t.length&&t.ionRangeSlider({type:"double",min:0,max:10,from:0,to:10,hide_min_max:!0,hide_from_to:!1,grid:!1,max_postfix:"+",onFinish:app.rangeInputInteraction}),a.length&&a.ionRangeSlider({type:"double",min:0,max:1e4,from:0,to:1e4,hide_min_max:!0,hide_from_to:!1,grid:!1,max_postfix:"+",prefix:"RM ",onFinish:app.rangeInputInteraction}),i.length&&i.ionRangeSlider({type:"double",min:1e3,max:2e3,from:1200,to:1800,hide_min_max:!0,hide_from_to:!1,grid:!1,onFinish:app.rangeInputInteraction})}function u(o){var n=e(o);n.length&&n.each(function(){var o=e(this),n=o.find(".js-slick-current"),a=o.find(".js-slick-total");o.find(".js-slick-slider").on("init",function(e,o){a.html(o.slideCount)}).slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,centerMode:!1,prevArrow:o.find(".js-slick-prev"),nextArrow:o.find(".js-slick-next")}).on("afterChange",function(e,o,a){n.html(a+1+" /")})})}function h(o,n){var a=e(o);a.length&&!function(){var o=new google.maps.LatLng(n.lat,n.lng),t=e(".js-map-btn");app.createMap(a,t,function(){var e=new google.maps.Map(a[0],_.merge(T,{zoom:7,coordinates:o}));app.createGmapMarker.create(e,o,n.address)})}()}function v(o){var n=e(o);n.length&&n.on("click",function(){var o=e(this),n=o.data("state")||"success";return o.addClass("loading"),setTimeout(function(){o.addClass("progress")},500),setTimeout(function(){o.removeClass("loading"),o.removeClass("progress"),o.addClass(n)},1e3),!1})}function b(o,n){var a=e(o);if(a.length){var t=[];requestAnimationFrame(function(){app.createMap(a,e(".js-map-btn"),function(){var e=new google.maps.Map(a[0],T);t=[],_.each(n,function(o){var n=C(o),i=app.createGmapInfoboxMarker(e,new google.maps.LatLng(o.lat,o.lng),o.address,n,a.data("infoboxTheme"));t.push(i)}),app.createGmapClustering(e,t)})})}}function y(o,n,a){var t=e(o),i=e(n);if(t.length&&i){var s,r=new google.maps.LatLng(a.lat,a.lng),l=e(".js-map-btn"),c=e(".js-panorama-btn");app.createMap(t,l,function(){var e=new google.maps.Map(t[0],_.merge(T,{zoom:7,coordinates:r})),o=C(a);app.createGmapInfoboxMarker(e,r,a.address,o,t.data("infoboxTheme"))}),app.createMap(i,c,function(){new google.maps.StreetViewPanorama(i[0],{position:r,pov:{heading:34,pitch:10},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},panControl:!0,panControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}})}),s=l.add(c).filter(".active");var p=function(o){s&&s.removeClass("active"),s=e(o),s.addClass("active")};l.on("click",function(){"xs"!==app.gridSize.get()&&(p(this),i.css({zIndex:5}),t.css({zIndex:10}))}),c.on("click",function(){"xs"!==app.gridSize.get()&&(p(this),i.css({zIndex:10}),t.css({zIndex:5}))})}}function k(o){var n=e(o);if(n.length){var a=e(o+"-block");n.each(function(){e(this).parsley().on("form:success",function(e){return app.notifier.showSuccess("You have successfully submit the form!"),!1}).on("form:error",function(o){return app.notifier.showError("Submited failed! Please try again."),_.each(a,function(o){var n,a=e(o).find(".parsley-required"),t=e(o).attr("id");a.length&&(e(o).addClass("opened"),e('[data-rel="#'+t+'"]').addClass("active"),n=e(o).find("#autocomplete-map"),n.length&&google.maps.event.trigger(n[0],"resize"))}),!1})})}}function w(o){var n=e(o);n.length&&n.popover()}function j(o,n){var a=e(o);if(a.length){var t=e(".js-map-btn"),i=a.find(".js-map");app.createMap(i,t,function(){function o(e){p?p.setPosition(e):s(e.lat(),e.lng()),r(e.lat(),e.lng()),n(e)}function n(e){d.geocode({latLng:e},function(e,o){o==google.maps.GeocoderStatus.OK?e[0]?f[0].value=e[0].formatted_address:f[0].value="No results":f[0].value=o})}function t(){var e=h.getPlace();if(e.geometry){if(c.panTo(e.geometry.location),c.setZoom(15),p){var o=new google.maps.LatLng(e.geometry.location.A,e.geometry.location.F);p.setPosition(o)}else s(e.geometry.location.A,e.geometry.location.F);r(e.geometry.location.A,e.geometry.location.F)}else h.placeholder="Enter a address"}function s(e,n){var a=new google.maps.LatLng(e,n);p=app.createGmapMarker.createAdvanced({position:a,map:c,draggable:!0}),google.maps.event.addListener(p,"dragend",function(){o(p.getPosition())})}function r(e,o){g[0].value=e,g[1].value=o}function l(){for(var e=0;e<overlays.length;e++)overlays[e].overlay.setMap(null);overlays=[]}var c,p,d,f=a.find(".js-autocomplete"),g=a.find(".js-location-coords"),m=a.find(".js-remove-overlays"),u=!1;d=new google.maps.Geocoder,c=new google.maps.Map(i[0],T),google.maps.event.addListener(c,"click",function(e){o(e.latLng)}),app.geolocation.activate(c,{buttonTrigger:a.find(".js-geolocate"),onSuccess:function(e){o(e)}});var h=new google.maps.places.Autocomplete(f[0],T.autocomplete);google.maps.event.addListener(h,"place_changed",t),f.on("keypress",function(e){if(13==e.keyCode)return!1});var v=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT,drawingModes:[google.maps.drawing.OverlayType.POLYGON]}});u||v.setMap(c),google.maps.event.addListener(v,"overlaycomplete",function(e){overlays.push(e)}),g.on("input",function(o){if(e.isNumeric(g[0].value())&&e.isNumeric(g[1].value())){var a=new google.maps.LatLng(g[0].value(),g[1].value());if(p?p.setPosition(a):s(a.lat(),a.lng()),c.panTo(a),n(a),13==o.keyCode)return!1}}),m.on("click",function(){l()})})}}function x(o,n){var a=e(o);if(a.length){var t,i=new L.LatLng(33.74229160384012,(-117.86845207214355)),s=!1;app.createMap(a,e(".js-map-btn"),function(){if(s)t.invalidateSize();else{t=L.map(a[0],_.merge({zoom:10,center:i,zoomControl:!1,scrollWheelZoom:!1})),L.tileLayer("http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}).addTo(t);var e=L.control.zoom({position:"topright"});e.addTo(t),t.invalidateSize(),_.each(n,function(e){var o=C(e);app.createLeafletInfoboxMarker(t,new L.LatLng(e.lat,e.lng),e.address,o,a.data("infoboxTheme"))})}s=!0})}}function C(e){var o;return o="assets/media-demo/properties/277x180/"+e.image+".jpg","<span class='map__address'>"+e.address+"</span> <span class='map__info'><img  class='map__photo' src='"+o+"'/><span class='map__details'> <dl><dt>Type:</dt> <dd>"+e.type+"</dd></dl><dl><dt>Area:</dt> <dd>"+e.area+" m2</dd></dl><dl><dt>Bedrooms:</dt> <dd>"+e.bedrooms+"</dd></dl></span></span> <span class='map__price'><strong>$"+e.price+"</strong></span> <a  class='map__more' href='property_details.html'>Details</a>"}app.initTheme({colorTheme:"default",loadSvgWithAjax:!1}),app.activateHeaderSpy(),app.activateScrollToTopSpy(),app.scrollAnimation(),app.activateUIPanel();var T={zoom:10,center:new google.maps.LatLng(33.74229160384012,(-117.86845207214355)),scrollwheel:!1,zoomControl:!0,mapTypeControl:!0,autocomplete:{componentRestrictions:{country:"us"}},mapTypeControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},scaleControl:!0,scaleControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},panControl:!0,panControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}};s(".player"),i("#partners-slider"),t("select.form-control"),g(".js-search-form"),a(".js-gallery-item"),n(".js-contact-form"),o(".js-subscribe-form"),r("#review-slider"),l(".js-banner"),p("#slider-wide"),d(".js-banner-slider"),f(".js-slider-thumbs"),b(".js-map-index-canvas",window.demodata),b(".js-map-canvas-fullscreen",window.demodata),y('.js-map-canvas[data-type="map"]','.js-map-canvas[data-type="panorama"]',window.demodata[3]),k(".js-form"),m(),u(".js-slick-blog"),u(".js-slick-plan"),u("#counter-slider"),u("#properties-banner"),h(".js-map-canvas-contact",window.demodata[3]),v(".js-btn-demo"),w(".js-popover"),j(".js-map-location-dashboard-submit",{lat:37.7749295,lng:-122.41941550000001}),j(".js-map-location-dashboard",{lat:37.7749295,lng:-122.41941550000001}),j(".js-map-location-dashboard-hidden",{lat:37.7749295,lng:-122.41941550000001}),x(".js-map-canvas-leaflet",window.demodata),function(){0!==e(".js-form-property-1").length&&e(".js-form-property-1").parsley().on("form:success",function(o){return app.notifier.showSuccess("You have successfully submit the form! 1"),e('.form-property--dashboard a[href="#Location"]').tab("show"),!1}).on("form:error",function(e){return app.notifier.showError("Submited failed! Please try again. 2"),!1}).on("form:submit",function(e){console.log(arguments),e.submitEvent.preventDefault()})}()}(jQuery);